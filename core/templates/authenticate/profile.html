{% extends 'base.html' %} {% load static %} {% block css %}
<link rel="stylesheet" href="{% static 'css/profile.css'%}" />

{% endblock %} {% block content %}

<div id="profile">
  <div class="container p-5">
    <h1 class="my_pro_primary fw-bolder">User Profile</h1>
    <div class="p-4 user">
      <i class="fa-solid fa-user-tie fa-3x"></i>
      <div class="user-name my_pro_primary">
        <h4 class="fw-medium">{{ user.username }}</h4>
        <p>Class 9</p>
      </div>
    </div>
    <hr />
    <form action="{% url 'profile' %}" method="POST">
      {% csrf_token %}
      <div class="container py-4">
        <div class="row my_pro_primary fw-medium">
          <div class="form-group col-md-6">
            <h5>Name</h5>
            <input
              type="text"
              name="name"
              class="form-control fw-light"
              value="{{ user.name }}"
            />
          </div>
        </div>
        <h5 class="pt-lg-3 my_pro_primary fw-medium">Username</h5>
        <input
          type="text"
          name="username"
          class="form-control fw-light"
          value="{{ user.username }}"
        />
      </div>
      <hr />
      <div class="form-group container py-4">
        <div class="row my_pro_primary fw-medium">
          <div class="col-md-6">
            <h5>Email Address</h5>
            <div class="input-group">
              <span class="input-group-text"
                ><i class="fa-solid fa-envelope text-secondary"></i
              ></span>
              <input
                type="email"
                name="email"
                class="form-control fw-light"
                value="{{ user.email }}"
              />
            </div>
          </div>
          <div class="form-group col-md-6">
            <h5>Phone Number</h5>
            <div class="input-group">
              <span class="input-group-text"
                ><i class="fa-solid fa-mobile text-secondary"></i
              ></span>
              <input
                type="tel"
                name="phone"
                class="form-control fw-light"
                value="{{ user.phone }}"
              />
            </div>
            {% for error in form.phone.errors %}
            <p class="text-danger">{{ error }}</p>
            {% endfor %}
          </div>
        </div>
      </div>

      <hr />
      <div class="form-group container py-4">
        <div class="row my_pro_primary fw-medium">
          <div class="col-md-6">
            <h5>Current Password</h5>
            <div class="input-group">
              <span class="input-group-text"
                ><i class="fa-solid fa-key text-secondary"></i
              ></span>
              <input
                type="password"
                id="key1"
                name="old_password"
                class="form-control fw-light"
                placeholder=""
              />
              <span class="input-group-text passfield1"
                ><i
                  class="fa-solid fa-eye-slash text-secondary"
                  onclick="myFunction();"
                ></i
              ></span>
            </div>
            {% for error in form.old_password.errors %}
            <p class="text-danger">{{ error }}</p>
            {% endfor %}
          </div>
          <div class="form-group col-md-6">
            <h5>New Password</h5>
            <div class="input-group">
              <span class="input-group-text"
                ><i class="fa-solid fa-key text-secondary"></i
              ></span>
              <input
                type="password"
                name="new_password1"
                id="key2"
                class="form-control fw-light"
                placeholder=""
              />
              <span class="input-group-text passfield2"
                ><i
                  class="fa-solid fa-eye-slash text-secondary"
                  onclick="myFunction2()"
                ></i
              ></span>
            </div>
            {% for error in form.new_password1.errors %}
            <p class="text-danger">{{ error }}</p>
            {% endfor %}
          </div>
        </div>
        <h5 class="pt-lg-3 my_pro_primary fw-medium">Confirm New Password</h5>
        <div class="form-group input-group">
          <span class="input-group-text"
            ><i class="fa-solid fa-key text-secondary"></i
          ></span>
          <input
            type="password"
            name="new_password2"
            id="key3"
            class="form-control fw-light"
            placeholder=""
          />
          <span class="input-group-text passfield3"
            ><i
              class="fa-solid fa-eye-slash text-secondary"
              onclick="myFunction3()"
            ></i
          ></span>
        </div>
        {% for error in form.new_password2.errors %}
        <p class="text-danger">{{ error }}</p>
        {% endfor %}
      </div>
      <div class="row justify-content-end px-4">
        <div class="col-auto">
          <button
            style="border: 1px solid grey; color: #008080"
            type="button"
            class="btn"
          >
            Cancel
          </button>
          <button type="submit" class="btn btn-success">Save Changes</button>
        </div>
      </div>
    </form>
  </div>
</div>
{% block javascript %}
<script>
  function myFunction() {
    var x = document.getElementById("key1");
    var icon = document.querySelector(".passfield1 i");

    if (x.type === "password") {
      x.type = "text";
      icon.classList.remove("fa-eye-slash");
      icon.classList.add("fa-eye");
    } else {
      x.type = "password";
      icon.classList.remove("fa-eye");
      icon.classList.add("fa-eye-slash");
    }
  }

  function myFunction2() {
    var x = document.getElementById("key2");
    var icon = document.querySelector(".passfield2 i");

    if (x.type === "password") {
      x.type = "text";
      icon.classList.remove("fa-eye-slash");
      icon.classList.add("fa-eye");
    } else {
      x.type = "password";
      icon.classList.remove("fa-eye");
      icon.classList.add("fa-eye-slash");
    }
  }

  function myFunction3() {
    var x = document.getElementById("key3");
    var icon = document.querySelector(".passfield3 i");

    if (x.type === "password") {
      x.type = "text";
      icon.classList.remove("fa-eye-slash");
      icon.classList.add("fa-eye");
    } else {
      x.type = "password";
      icon.classList.remove("fa-eye");
      icon.classList.add("fa-eye-slash");
    }
  }
</script>
{% endblock %} {% endblock content %}
